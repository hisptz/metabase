<app-breadcrumb [routeItems]="routeDetails"></app-breadcrumb>
<div class="row" *ngIf="totalItems > 0">
  <div class="col-md-10 col-sm-10 col-xs-9">
    <small>{{progress}}</small>
  </div>
  <div class="col-md-2 col-sm-2 col-xs-3"><small class="pull-right">{{loadedItems}}/{{totalItems}} ({{calculateProgress(loadedItems,totalItems)}}%)</small></div>
</div>
<div class="row" *ngIf="totalItems > 0">
  <div class="col-md-12">
    <div class="progress" style="height: 7px;">
      <div class="progress-bar progress-bar-success progress-bar-striped {{loadedItems < totalItems ? 'active' : ''}}" role="progressbar"
           [attr.aria-valuenow]="calculateProgress(loadedItems,totalItems)" aria-valuemin="0" aria-valuemax="100" [ngStyle]="{'width' : calculateProgress(loadedItems,totalItems) + '%'}">
      </div>
    </div>
  </div>
</div>
<div class="row" *ngIf="importCompleted">
  <div class="col-md-12">
    <!--import summary-->
    <div class="panel panel-default">
      <div class="panel-body">
        <h4 class="page-header" style="margin-top: 2px;">{{isPreview ? 'Importing will make the following changes to the system' : 'Importing made the following changes to the system'}}</h4>
        <table class="table table-bordered">
          <thead>
          <tr>
            <th>#</th>
            <th>Item</th>
            <th class="text-success">Add{{isPreview ? '' : 'ed'}}</th>
            <th class="text-info">Update{{isPreview ? '' : 'd'}}</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let importSum of importSummary.importCountsPerMetadata; let i=index">
            <td>{{i + 1}}</td>
            <td>{{importSum.type}}</td>
            <td class="text-success">{{importSum.count.created}}</td>
            <td class="text-info">{{importSum.count.updated}}</td>
          </tr>
          <tr>
            <th></th>
            <th>Total</th>
            <th class="text-success">{{importSummary.overallImportCounts.created}}</th>
            <th class="text-info">{{importSummary.overallImportCounts.updated}}</th>
          </tr>
          </tbody>
        </table>
        <div class="form-group" *ngIf="isPreview && importCompleted">
          <button class="btn btn-primary" (click)="completeImport()">Continue with Import</button>
          <button class="btn btn-warning" (click)="cancelImport()">Cancel</button>
        </div>
      </div>
    </div>
    <!--end of import summary-->
  </div>
</div>
